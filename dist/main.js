(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){return t.split(" ").map(n).join(" ")}function a(t){return t.toLowerCase().trim().replace(/[\s\W-]+/g,"-")}function s(t){return t.replace(/\s+/g," ").trim()}function i(t,e){return t.length>e?t.slice(0,e)+"...":t}function r(t){return t.replace(/[^a-zA-Z0-9 ]/g,"")}function l(){const t=$("[validate]");t.removeClass("is-invalid"),t.next(".invalid-feedback").remove()}t.r(e),t.d(e,{normalize:()=>s,sanitize:()=>r,slugify:()=>a,truncate:()=>i,ucFirst:()=>n,ucWords:()=>o});class c{constructor(t={}){this.baseUrl=t.baseUrl||"",this.onSuccess=t.onSuccess||(()=>{}),this.onError=t.onError||(()=>{}),this.onBeforeSend=t.onBeforeSend||(()=>{}),this.onComplete=t.onComplete||(()=>{}),this.withReload=t.withReload||!1,this.redirectTo=t.redirectTo||""}create(t){return new c({baseUrl:t.baseUrl,onSuccess:t.onSuccess,onError:t.onError,onBeforeSend:t.onBeforeSend,onComplete:t.onComplete,withReload:t.withReload,redirectTo:t.redirectTo})}request(t){const{url:e,method:n,data:o,onSuccess:a,onError:s,onBeforeSend:i,onComplete:r,withReload:c,redirectTo:u}=t,d={url:this.baseUrl?this.baseUrl+e:e,method:n||"GET",data:o||{},onBeforeSend:i||this.onBeforeSend||(()=>{}),onSuccess:a||this.onSuccess||(()=>{}),onError:s||this.onError||(()=>{}),onComplete:r||this.onComplete||(()=>{}),withReload:c||this.withReload,redirectTo:u||this.redirectTo},h=o instanceof FormData,f={url:d.url,method:d.method,data:d.data,contentType:!1,processData:!1,async:!1,beforeSend:function(t){d.onBeforeSend(t)},success:function(t){l(),d.onSuccess(t),(d.withReload||d.redirectTo)&&(window.location.href=d.redirectTo)},error:function(t){d.onError(t)},complete:function(){d.onComplete()}};return h||(delete f.contentType,delete f.processData),$.ajax(f)}}const u=new c;function d(t,e){return Object.entries(e).reduce(((t,[e,n])=>(t[e]=n&&"object"==typeof n?d(t[e]||{},n):n,t)),{...t})}const h={title:{error:"",success:"",warning:""},message:{error:"Oops! Something went wrong",success:"Action performed successfully",warning:"This action needs attention"}},f={toast:!0,timer:3e3,position:"top-end",showConfirmButton:!1,timerProgressBar:!0,didOpen:t=>{t.onmouseenter=Swal.stopTimer,t.onmouseleave=Swal.resumeTimer}},m={},p={title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"},b=new class{constructor(){Object.assign(this,{global:h,globalToast:f,globalSwal:m,globalConfirm:p})}#t(t){return t.charAt(0).toUpperCase()+t.slice(1)}config(t={},e=""){const n=e?`global${this.#t(e)}`:"global";this[n]=d(this[n],t)}#e(t,e,n){"string"==typeof t&&(e=t,t={});const{title:o,message:a,...s}=this.global,i=o[e]||this.#t(e),{title:r=i,config:l}=t||{};return{title:r,text:t?.message||a[e]||"",config:{...s,...this[`global${this.#t(n)}`],...l},status:e}}toast(t,e){const{title:n,text:o,config:a,status:s}=this.#e(t,e,"toast");Swal.mixin(a).fire({title:n,text:o,icon:s})}swal(t,e){const{title:n,text:o,config:a,status:s}=this.#e(t,e,"swal");Swal.fire({title:n,text:o,icon:s,...a})}confirm(t){return new Promise((e=>{Swal.fire({...this.globalConfirm,...t}).then((t=>{e(t.isConfirmed)}))}))}},g=t=>(e={})=>{b.config(e,t)};b.toast.config=g("toast"),b.swal.config=g("swal"),b.confirm.config=g("confirm");const x=b;class v{constructor(t={}){this.instance=null,this.el=t.el||"",this.url=t.url||"",this.columns=t.columns||[],this.dataFilter=this.#n(t.filters)||{},this.data=t.data||{},this.initComplete=t.initComplete||(()=>{}),this.drawCallback=t.drawCallback||(()=>{}),this.buttons=this.#o(t.export)||{},this.lengthMenu=t.lengthMenu||[[10,25,50,100],[10,25,50,100]],this.#a(t.search),this.#s(t.filters),this.#i(t.export)}init(){return this.instance=$(this.el).DataTable({processing:!0,serverSide:!0,responsive:!1,ajax:{url:this.url,type:"GET",data:t=>$.extend({},t,this.dataFilter,this.data)},initComplete:()=>{const t={el:this.el,instance:this.instance,columns:this.columns,data:this.data};this.initComplete(t)},drawCallback:()=>{const t={el:this.el,instance:this.instance,columns:this.columns,data:this.data};this.drawCallback(t)},order:[],columns:this.columns,buttons:this.buttons,lengthMenu:this.lengthMenu}),this}#a(t){if(!t)return;let e,n;$(document).on("keyup",t,(t=>{clearTimeout(e),e=setTimeout((()=>{const e=t.target.value;e!==n&&(this.instance.search(e).draw(),n=e)}),300)}))}#s(t){if(t)return t.forEach((t=>{const{el:e,name:n,event:o="change"}=t;$(document).on(o,e,(t=>{this.dataFilter[n]=t.target.value,this.reload()}))}))}#i(t){if(!t)return;const{el:e}=t;$(document).on("click",`${e} [data-export]`,(t=>{t.preventDefault();const e=$(t.currentTarget).data("export");this.instance.buttons(`.buttons-${e}`).trigger()}))}reload(){this.instance.ajax.reload()}#n(t){if(t)return t.reduce(((t,e)=>($(e.el).val(e.val).trigger("change"),t[e.name]=e.val||"",t)),{})}#o(t){if(!t)return;const{el:e,title:n,columns:o=":visible",except:a=[]}=t,s={copy:"copyHtml5",excel:"excelHtml5",csv:"csvHtml5",pdf:"pdfHtml5",print:"print"},i=a?this.columns.map(((t,e)=>e)).filter(((t,e)=>!a.includes(e))):o;return $(`${e} [data-export]`).map(((e,o)=>{const a=$(o).data("export");return d({title:n,extend:s[a],action:this.#r,exportOptions:{columns:i}},t[a]||{})})).get()}#r(t,e,n,o){var a=this,s=e.settings()[0]._iDisplayStart;e.one("preXhr",(function(t,i,r){r.start=0,r.length=2147483647,e.one("preDraw",(function(t,i){return n[0].className.indexOf("buttons-copy")>=0?$.fn.dataTable.ext.buttons.copyHtml5.action.call(a,t,e,n,o):n[0].className.indexOf("buttons-excel")>=0?$.fn.dataTable.ext.buttons.excelHtml5.available(e,o)?$.fn.dataTable.ext.buttons.excelHtml5.action.call(a,t,e,n,o):$.fn.dataTable.ext.buttons.excelFlash.action.call(a,t,e,n,o):n[0].className.indexOf("buttons-csv")>=0?$.fn.dataTable.ext.buttons.csvHtml5.available(e,o)?$.fn.dataTable.ext.buttons.csvHtml5.action.call(a,t,e,n,o):$.fn.dataTable.ext.buttons.csvFlash.action.call(a,t,e,n,o):n[0].className.indexOf("buttons-pdf")>=0?$.fn.dataTable.ext.buttons.pdfHtml5.available(e,o)?$.fn.dataTable.ext.buttons.pdfHtml5.action.call(a,t,e,n,o):$.fn.dataTable.ext.buttons.pdfFlash.action.call(a,t,e,n,o):n[0].className.indexOf("buttons-print")>=0&&$.fn.dataTable.ext.buttons.print.action(t,e,n,o),e.one("preXhr",(function(t,e,n){i._iDisplayStart=s,n.start=s})),setTimeout(e.ajax.reload,0),!1}))})),e.ajax.reload()}}const w={config(t={}){this.globalConfig=t},create(t="",e){return new v({el:t,...this.globalConfig,...e}).init()}},T={http:{create:u.create,request:u.request,validate:function(t){l();const e=t.errors||[];$.each(e,(function(t,e){const n=t.split(".");if(1==n.length){const n=$(`[validate="${t}"]`);n.addClass("is-invalid"),n.after(`<div class="invalid-feedback">${e}</div>`)}else{const t=n.slice(0,-1).join("."),o=n[n.length-1],a=$(`[validate="${t}.*"]`);a.eq(o).addClass("is-invalid"),a.eq(o).after(`<div class="invalid-feedback">${e}</div>`)}}))},fillForm:function(t,e={}){const{except:n,callback:o}=e;Object.keys(t).filter((t=>!n?.includes(t))).forEach((e=>{$(`[name=${e}]`).val(t[e]).trigger("change")})),setTimeout((()=>{o&&o()}),300)}},formatter:e,notify:x,tables:w};window.iampact=T})();
//# sourceMappingURL=main.js.map